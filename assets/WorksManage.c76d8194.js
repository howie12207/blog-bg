var I=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var G=(l,o,a)=>o in l?I(l,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[o]=a,W=(l,o)=>{for(var a in o||(o={}))Q.call(o,a)&&G(l,a,o[a]);if(L)for(var a of L(o))X.call(o,a)&&G(l,a,o[a]);return l},P=(l,o)=>J(l,K(o));import{M as Y,P as Z,_ as ee,B as te}from"./PopupCommon.2c2765ba.js";/* empty css                 */import{m as u,c as M,M as ae,o as h,j as C,w as v,e as d,t as q,f as r,D as U,g as z,G as w,E as A,u as le,O as se,b as oe,p as ue,P as ie,x as F,n as ne,d as H,h as de,F as re}from"./vendor.28fd920d.js";import{s as E,a as j,B as R}from"./index.db9d42c1.js";import{_ as pe}from"./BaseEditor.8f5adc0f.js";var ce="/blog-bg/assets/delete.298e8835.svg",me=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ce}),ve="/blog-bg/assets/disable.eca89bda.svg",Ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ve}),ge="/blog-bg/assets/edit.5f1f2042.svg",fe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ge}),be="/blog-bg/assets/enable.87d56ace.svg",ye=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:be});function _e(l){return E({url:"/works",method:"post",data:l})}function ke(l){return E({url:"/works/all",method:"get",params:l})}function N(l){return E({url:`/works/${l._id}`,method:"put",data:l})}function he(l){return E({url:`/works/${l}`,method:"delete"})}const xe={class:"p-8 bg-white overflow-x-hidden overflow-y-hidden h-full rounded"},we={class:"text-2xl text-center font-black mb-4"},De={class:"overflow-y-auto max-h-[80vh]"},Ce={class:"flex items-center"},$e=d("label",{class:"text-lg mr-4"},"\u72C0\u614B",-1),Ue=w("\u4E0B\u67B6"),je=w("\u4E0A\u67B6"),Oe=d("label",{class:"text-lg mr-4"},"\u63A8\u85A6",-1),Se=w("\u5426"),Be=w("\u662F"),Te=d("label",{class:"block mt-4 text-lg"},"\u5167\u5BB9",-1),We={class:"flex justify-center mt-4 gap-x-8"},Pe=w("\u78BA\u8A8D"),qe=w("\u53D6\u6D88"),Ee={props:{type:{type:String,default:""},detailData:{type:Object,default:()=>({})},newOrder:{type:Number,default:1}},emits:["close","fetchWorks"],setup(l,{emit:o}){var S,$;const a=l,c=u({inputValue:a.detailData.name||"",isValid:a.type==="edit",label:"\u6A19\u984C",id:"title",rules:{isRequired:!0}}),p=u({inputValue:a.detailData.img||"",isValid:a.type==="edit",label:"\u5716\u7247path",id:"img",rules:{isRequired:!0}}),i=u({inputValue:a.detailData.pathCode||"",isValid:a.type==="edit",label:"Code path",id:"pathCode",rules:{isRequired:!0}}),V=u({inputValue:a.detailData.pathDemo||"",isValid:a.type==="edit",label:"Demo path",id:"pathDemo",rules:{isRequired:!0}}),n=u({inputValue:a.detailData.url||"",isValid:!0,label:"\u6587\u7AE0url",id:"url"}),m=u({inputValue:a.detailData.order||a.newOrder,isValid:!0,label:"\u6392\u5E8F",id:"order",type:"number"}),y=u((S=a.detailData.status)!=null?S:1),f=u(($=a.detailData.recommend)!=null?$:!1),_=u(a.detailData.content||""),x=()=>{o("close")},O=async g=>{if(!D.value)return;const t=Date.now(),k=P(W({},a.detailData),{name:c.value.inputValue,img:p.value.inputValue,pathCode:i.value.inputValue,pathDemo:V.value.inputValue,url:n.value.inputValue,order:m.value.inputValue,status:y.value,recommend:f.value,content:_.value,createTime:a.type==="edit"?a.detailData.createTime:t,updateTime:t});(a.type==="edit"?await N(k):await _e(k))&&(g(),A({type:"success",message:a.type==="edit"?"\u66F4\u65B0\u4F5C\u54C1\u6210\u529F":"\u65B0\u589E\u4F5C\u54C1\u6210\u529F",showClose:!0}),o("fetchWorks"))},D=M(()=>c.value.isValid&&p.value.isValid&&_.value);return(g,t)=>{const k=ae;return h(),C(Y,{onClose:x,"close-out":!1},{default:v(({close:s})=>[d("div",xe,[d("h1",we,q(l.type==="create"?"\u65B0\u589E\u4F5C\u54C1":"\u7DE8\u8F2F\u4F5C\u54C1"),1),d("section",De,[r(j,U(c.value,{inputValue:c.value.inputValue,"onUpdate:inputValue":t[0]||(t[0]=e=>c.value.inputValue=e),isValid:c.value.isValid,"onUpdate:isValid":t[1]||(t[1]=e=>c.value.isValid=e),class:"my-2"}),null,16,["inputValue","isValid"]),r(j,U(p.value,{inputValue:p.value.inputValue,"onUpdate:inputValue":t[2]||(t[2]=e=>p.value.inputValue=e),isValid:p.value.isValid,"onUpdate:isValid":t[3]||(t[3]=e=>p.value.isValid=e),class:"my-2"}),null,16,["inputValue","isValid"]),r(j,U(i.value,{inputValue:i.value.inputValue,"onUpdate:inputValue":t[4]||(t[4]=e=>i.value.inputValue=e),isValid:i.value.isValid,"onUpdate:isValid":t[5]||(t[5]=e=>i.value.isValid=e),class:"my-2"}),null,16,["inputValue","isValid"]),r(j,U(V.value,{inputValue:V.value.inputValue,"onUpdate:inputValue":t[6]||(t[6]=e=>V.value.inputValue=e),isValid:V.value.isValid,"onUpdate:isValid":t[7]||(t[7]=e=>V.value.isValid=e),class:"my-2"}),null,16,["inputValue","isValid"]),r(j,U(n.value,{inputValue:n.value.inputValue,"onUpdate:inputValue":t[8]||(t[8]=e=>n.value.inputValue=e),isValid:n.value.isValid,"onUpdate:isValid":t[9]||(t[9]=e=>n.value.isValid=e),class:"my-2"}),null,16,["inputValue","isValid"]),r(j,U(m.value,{inputValue:m.value.inputValue,"onUpdate:inputValue":t[10]||(t[10]=e=>m.value.inputValue=e),isValid:m.value.isValid,"onUpdate:isValid":t[11]||(t[11]=e=>m.value.isValid=e),class:"my-2"}),null,16,["inputValue","isValid"]),d("div",Ce,[$e,r(k,{modelValue:y.value,"onUpdate:modelValue":t[12]||(t[12]=e=>y.value=e),label:0},{default:v(()=>[Ue]),_:1},8,["modelValue"]),r(k,{modelValue:y.value,"onUpdate:modelValue":t[13]||(t[13]=e=>y.value=e),label:1},{default:v(()=>[je]),_:1},8,["modelValue"]),Oe,r(k,{modelValue:f.value,"onUpdate:modelValue":t[14]||(t[14]=e=>f.value=e),label:!1},{default:v(()=>[Se]),_:1},8,["modelValue"]),r(k,{modelValue:f.value,"onUpdate:modelValue":t[15]||(t[15]=e=>f.value=e),label:!0},{default:v(()=>[Be]),_:1},8,["modelValue"])]),Te,r(pe,{content:_.value,"onUpdate:content":t[16]||(t[16]=e=>_.value=e)},null,8,["content"])]),d("div",We,[r(R,{onClick:e=>O(s),disabled:!z(D)},{default:v(()=>[Pe]),_:2},1032,["onClick","disabled"]),r(R,{mainColor:"rgb(107, 114, 128)",onClick:s},{default:v(()=>[qe]),_:2},1032,["onClick"])])])]),_:1})}}},Me={class:"mb-4"},ze={class:"text-red-400 font-black"},Fe={props:{type:{type:String,default:""},detailData:{type:Object,default:()=>({})}},emits:["close","fetchWorks"],setup(l,{emit:o}){const a=l,c={delete:{title:"\u522A\u9664\u4F5C\u54C1"},disable:{title:"\u4E0B\u67B6\u4F5C\u54C1"},delete:{title:"\u522A\u9664\u4F5C\u54C1"}},p=()=>{o("close")},i=async V=>{var f,_,x;const n=a.type,m={delete:{api:he,params:a.detailData._id,msg:"\u522A\u9664\u6210\u529F"},enable:{api:N,params:P(W({},a.detailData),{status:1}),msg:"\u4E0A\u67B6\u6210\u529F"},disable:{api:N,params:P(W({},a.detailData),{status:0}),msg:"\u4E0B\u67B6\u6210\u529F"}};await((_=m[n])==null?void 0:_.api((f=m[n])==null?void 0:f.params))&&(o("fetchWorks"),A({type:"success",message:(x=m[n])==null?void 0:x.msg,showClose:!0})),V()};return(V,n)=>(h(),C(Z,{title:c[l.type].title,onClose:p,onSubmit:i},{content:v(()=>[d("h2",Me,[w(" \u78BA\u5B9A\u662F\u5426"+q(c[l.type].title)+" ",1),d("span",ze,q(a.detailData.name),1)])]),_:1},8,["title"]))}},Re={class:"text-right mb-4"},Ne=w("\u65B0\u589E\u4F5C\u54C1"),Le={class:"flex justify-center gap-x-2"},Ge=["onClick"],Ae=["xlink:href"],Ze={setup(l){const o=le(),a=se(),c=oe(),p=u(!1),i=M(()=>{var s;return((s=o.getters.auth)==null?void 0:s.article)||[]}),V=u({page:a.query.page||0,size:10}),n=u(Number(a.query.page)+1||1),m=s=>{const e={page:s-1,size:10};c.push({query:e}),D(e),window.scrollTo(0,0)},y=s=>{const e={0:{text:"\u5F85\u4E0A\u67B6",color:"text-gray-400"},1:{text:"\u4E0A\u67B6\u4E2D",color:"text-green-500"},default:{text:"\u672A\u77E5\u72C0\u614B",color:"text-red-300"}};return e[s]||e.default},f=({status:s})=>[{id:1,icon:"edit",show:i.value.includes(4)},{id:2,icon:"enable",show:i.value.includes(4)&&s===0},{id:3,icon:"disable",show:i.value.includes(4)&&s===1},{id:4,icon:"delete",show:i.value.includes(8)&&s===0}].filter(B=>B.show),_=[{label:"\u5EFA\u7ACB\u65E5\u671F",key:"createTime",type:"date"},{label:"\u6A19\u984C",key:"name"},{label:"\u6392\u5E8F",key:"order"},{label:"\u72C0\u614B",key:"status",type:"slot"},{label:"\u64CD\u4F5C",key:"operation",type:"slot"}],x=u([]),O=u(0),D=async s=>{p.value=!0;const e=await ke(s)||{};p.value=!1,x.value=e.content||[],O.value=e.totalElements||0};ue(()=>{D(V.value)});const S=M(()=>{var s,e;return((e=(s=x.value)==null?void 0:s[0])==null?void 0:e.order)+1||1}),$=u({}),g=u(void 0),t=(s,e)=>{$.value=e||{},g.value=s},k=s=>{const e=`./img/${s}`;return{"./img/delete.svg":me,"./img/disable.svg":Ve,"./img/edit.svg":fe,"./img/enable.svg":ye}[e].default};return(s,e)=>{const B=ie;return h(),C(ee,{title:"\u4F5C\u54C1\u7BA1\u7406",desc:"\u6B64\u5340\u57DF\u53EF\u65B0\u589E\u3001\u67E5\u770B\u3001\u7DE8\u8F2F\u3001\u522A\u9664\u3001\u4E0A\u67B6\u3001\u4E0B\u67B6\u4F5C\u54C1\uFF0C\u82E5\u60A8\u6C92\u6709\u5C0D\u61C9\u9078\u9805\u6309\u9215\uFF0C\u4EE3\u8868\u60A8\u6C92\u6709\u6B0A\u9650\u3002"},{default:v(()=>[d("div",Re,[z(i).includes(2)?(h(),C(R,{key:0,mainColor:"#3B82F6",onClick:e[0]||(e[0]=b=>t("create"))},{default:v(()=>[Ne]),_:1})):F("",!0)]),r(te,{loading:p.value,listTitles:_,listData:x.value},{status:v(({thisData:b})=>[d("span",{class:ne(y(b.status).color)},q(y(b.status).text),3)]),operation:v(({thisData:b})=>[d("div",Le,[(h(!0),H(re,null,de(f(b),T=>(h(),H("svg",{key:T.id,class:"cursor-pointer",width:"24",height:"24",viewBox:"0 0 24 24",onClick:He=>t(T.icon,b)},[d("use",{"xlink:href":k(`${T.icon}.svg`)+`#${T.icon}`},null,8,Ae)],8,Ge))),128))])]),_:1},8,["loading","listData"]),O.value?(h(),C(B,{key:0,currentPage:n.value,"onUpdate:currentPage":e[1]||(e[1]=b=>n.value=b),class:"text-center mt-8 mb-4",background:"",layout:"prev, pager, next",total:O.value,"pager-count":5,onCurrentChange:m},null,8,["currentPage","total"])):F("",!0),g.value==="create"||g.value==="edit"?(h(),C(Ee,{key:1,type:g.value,detailData:$.value,newOrder:z(S),onClose:t,onFetchWorks:e[2]||(e[2]=b=>D(s.$route.query))},null,8,["type","detailData","newOrder"])):g.value==="enable"||g.value==="disable"||g.value==="delete"?(h(),C(Fe,{key:2,type:g.value,detailData:$.value,onClose:t,onFetchWorks:e[3]||(e[3]=b=>D(s.$route.query))},null,8,["type","detailData"])):F("",!0)]),_:1})}}};export{Ze as default};
